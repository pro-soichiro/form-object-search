<p id="notice"><%= notice %></p>

<h1>
  Name: <%= @prefecture.name %>
</h1>
<h2>
  User: <%= @prefecture.users.size %>

  <% case @prefecture.users.size %>
  <% when 0 %>
  <% when 1 %>
    Person
  <% else %>
    People
  <% end %>
</h2>

<table>
  <thead>
    <tr>
      <th>Last name</th>
      <th>First name</th>
      <th>Born on</th>
      <th>Birthplace</th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% @prefecture.users.each do |user| %>
      <tr>
        <td><%= user.last_name %></td>
        <td><%= user.first_name %></td>
        <td><%= user.born_on %></td>
        <td><%= user.birthplace&.prefecture&.name %></td>
        <td><%= user.birthplace&.detail %></td>
        <td><%= link_to 'Show', user %></td>
        <td><%= link_to 'Edit', edit_user_path(user) %></td>
        <td><%= link_to 'Destroy', user, method: :delete, data: { confirm: 'Are you sure?' } %></td>
      </tr>
    <% end %>
  </tbody>
</table>

<%= link_to 'Edit', edit_prefecture_path(@prefecture) %> |
<%= link_to 'Back', prefectures_path %>
